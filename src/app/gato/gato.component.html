<div class="game-arena">
  <!-- Header con estadÃ­sticas -->
  <div class="header">
    <h1 class="game-title">ğŸ® BATALLA RETRO ğŸ®</h1>
    <div class="score-board">
      <div class="player-score">
        <div class="player-avatar player-x">ğŸ¤–</div>
        <div class="score-info">
          <span class="player-name">JUGADOR</span>
          <span class="score">{{playerScore}}</span>
        </div>
      </div>
      <div class="vs-divider">VS</div>
      <div class="player-score">
        <div class="player-avatar player-o">ğŸ¤–</div>
        <div class="score-info">
          <span class="player-name">CPU</span>
          <span class="score">{{cpuScore}}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Indicador de turno -->
  <div class="turn-indicator" *ngIf="!winner && !isDraw">
    <div class="turn-display" [class.player-turn]="currentPlayer === 'X'" [class.cpu-turn]="currentPlayer === 'O'">
      <span class="turn-icon">{{currentPlayer === 'X' ? 'ğŸ¤–' : 'ğŸ¤–'}}</span>
      <span class="turn-text">{{currentPlayer === 'X' ? 'TU TURNO' : 'TURNO CPU'}}</span>
    </div>
  </div>

  <!-- Tablero de juego -->
  <div class="battle-board" *ngIf="!winner && !isDraw">
    <div class="grid-container">
      <div *ngFor="let row of board; let rowIndex = index" class="board-row">
        <div *ngFor="let cell of row; let colIndex = index"
             class="battle-cell"
             [class.occupied]="cell !== ''"
             [class.player-x]="cell === 'X'"
             [class.player-o]="cell === 'O'"
             [class.winning-cell]="isWinningCell(rowIndex, colIndex)"
             (click)="play(rowIndex, colIndex)">
          <div class="cell-content">
            <span *ngIf="cell === 'X'" class="symbol symbol-x">âš¡</span>
            <span *ngIf="cell === 'O'" class="symbol symbol-o">ğŸ”¥</span>
          </div>
          <div class="cell-glow"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pantalla de resultado -->
  <div *ngIf="winner || isDraw" class="result-screen">
    <div class="result-content">
      <div class="result-animation">
        <div *ngIf="winner === 'X'" class="victory-player">
          <span class="big-emoji">ğŸ†</span>
          <h2>Â¡VICTORIA!</h2>
          <p>Has derrotado a la CPU</p>
        </div>
        <div *ngIf="winner === 'O'" class="defeat-player">
          <span class="big-emoji">ğŸ˜¢</span>
          <h2>DERROTA</h2>
          <p>La CPU te ha vencido</p>
        </div>
        <div *ngIf="isDraw && !winner" class="draw-result">
          <span class="big-emoji">ğŸ¤</span>
          <h2>EMPATE</h2>
          <p>Nadie gana esta vez</p>
        </div>
      </div>
      
      <div class="result-buttons">
        <button class="btn-rematch" (click)="resetGame()">
          ğŸ”„ REVANCHA
        </button>
        <button class="btn-new-match" (click)="newMatch()">
          ğŸ² NUEVA PARTIDA
        </button>
      </div>
    </div>
  </div>

  <!-- Efectos de partÃ­culas -->
  <div class="particles" *ngIf="showParticles">
    <div *ngFor="let particle of particles" 
         class="particle" 
         [style.left.px]="particle.x"
         [style.top.px]="particle.y"
         [style.animation-delay.ms]="particle.delay">
      {{particle.emoji}}
    </div>
  </div>
</div>
